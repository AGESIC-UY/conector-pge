<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a="http://richfaces.org/a4j"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:rich="http://richfaces.org/rich"
       template="/templates/template.xhtml">
       			
		<ui:define name="pageTitle">Home</ui:define>
		<ui:define name="pageHeader">Home</ui:define>

		<ui:define name="body">
			<h:form>
				<rich:spacer/>
				<h:outputText value="#{msg.type}: " />
				<h:selectOneListbox id="type" value="#{connector.type}" size="1" onchange="submit()">
					<f:selectItem id="item1" itemLabel="#{connector.typeTestingLabel}" itemValue="#{connector.typeTesting}" />
					<f:selectItem id="item2" itemLabel="#{connector.typeProductionLabel}" itemValue="#{connector.typeProduction}" />
				</h:selectOneListbox>
								
				<br/>
				<br/>
				
				<rich:dataTable id="conectoresTable" value="#{connector.connectors}" var="connect" rowClasses="even, odd">
                    <rich:column style="width:20%">
		                <f:facet name="header"><h:outputText value="#{msg.name}" /></f:facet>
		                <h:outputText value="#{connect.name}" />
			        </rich:column>
			        <rich:column style="width:10%">
		                <f:facet name="header"><h:outputText value="#{msg.type}" /></f:facet>
		                <h:outputText value="#{connect.typeLabel}" style="font-weight: bold;"/>
			        </rich:column>
			        <rich:column style="width:25%">
		                <f:facet name="header"><h:outputText value="#{msg.description}" /></f:facet>
		                <h:outputText value="#{connect.shortDescription}" />
			        </rich:column>					       
			        <rich:column style="width:25%">
		                <f:facet name="header"><h:outputText value="#{msg.path}" /></f:facet>
		                <h:outputText value="#{connect.path}" />
			        </rich:column>					       
			        <rich:column styleClass="actionColumn">
		                <f:facet name="header"><h:outputText value="#{msg.actions}" /></f:facet>
		                <h:commandLink action="#{connector.view}" >
		                	<img src="../img/find.png" alt="Ver conector" title="Ver Conector"/>
		                	<f:setPropertyActionListener value="#{connect.id}" target="#{connector.connector.id}"></f:setPropertyActionListener>
		                </h:commandLink>
		                &#160;&#160;
		                <h:commandLink action="#{connector.edit}" >
		                	<img src="../img/edit.png" alt="Editar conector" title="Editar Conector"/>
		                	<f:setPropertyActionListener value="#{connect.id}" target="#{connector.connector.id}"></f:setPropertyActionListener>
		                </h:commandLink>
		                &#160;&#160;
		                <h:commandLink  action="#{connector.delete}" onclick="if (!confirm('Est&#243; seguro que desea eliminar el Conector?')) return false;">
		                	<img src="../img/Pdelete.png" alt="Borrar conector" title="Borrar Conector"/>
		                	<f:setPropertyActionListener value="#{connect.id}" target="#{connector.connector.id}"></f:setPropertyActionListener>
		                </h:commandLink>
		                &#160;&#160;
		                <h:outputLink value="#{(connector.typeTesting eq connect.type) ? connector.serverTestingPath : connector.serverProductionPath}/#{connect.pathToWsdl}?wsdl" target="_blank"><h:outputLabel value="#{msg.wsdl}"/></h:outputLink>
		                &#160;&#160;
		                <h:outputLink value="#{facesContext.externalContext.requestContextPath}/export?id=#{connect.id}" ><h:outputLabel value="#{msg.export}"/></h:outputLink>
		                	                
			        </rich:column>
				</rich:dataTable>
			
				<div align="center">
					&#160;&#160;&#160;
					<h:commandButton action="#{connector.vaciarBean}" value="#{msg.newConnector}"/>
					&#160;&#160;&#160;
					</div>
				
			</h:form>
			
				<br />
				
				<rich:panel>
					<f:facet name="header" >
						<h:outputText value="#{msg.importConnector}" />
					</f:facet>
					<h:panelGroup>
						<h:messages id="messages2" globalOnly="false" styleClass="fieldError"/>
						<h:form enctype="multipart/form-data">
							<h:commandButton action="#{connector.importToXml}" value="#{msg.import}"/>
							<t:inputFileUpload id="importConnectorFile" storage="file" 
									value="#{connector.importConnectorFile}" size="60"/>
						</h:form>
					</h:panelGroup>
				</rich:panel>
				
				
				
		</ui:define>
</ui:composition>
