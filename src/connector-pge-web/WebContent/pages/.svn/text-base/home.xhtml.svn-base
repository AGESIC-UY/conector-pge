<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a="http://richfaces.org/a4j"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	xmlns:rich="http://richfaces.org/rich"
	template="/templates/template.xhtml">

	<ui:define name="pageTitle">Home</ui:define>
	<ui:define name="pageHeader">Home</ui:define>

	<ui:define name="body">
		<rich:panel panelBorderColor="white">
			<f:facet name="header">
				<h:outputText value="#{msg.importConnector}" />
			</f:facet>
			<h:panelGroup>
				<h:form enctype="multipart/form-data">
					<h:commandButton action="#{connector.importToXml}"
						value="#{msg.import}" />
					<t:inputFileUpload id="importConnectorFile" storage="file"
						value="#{connector.importConnectorFile}" size="60" />
				</h:form>
			</h:panelGroup>
		</rich:panel>

		<br />
		<rich:separator height="4" lineType="double" />
		<br />

		<h:form>
			<h:panelGrid columns="3">
				<h:panelGroup>
					<h:outputText value="#{msg.type}: " />
				</h:panelGroup>
				<h:panelGroup>
					<h:selectOneListbox id="type" value="#{connector.type}" size="1"
						onchange="submit()">
						<f:selectItem id="item1" itemLabel="#{connector.typeTestingLabel}"
							itemValue="#{connector.typeTesting}" />
						<f:selectItem id="item2"
							itemLabel="#{connector.typeProductionLabel}"
							itemValue="#{connector.typeProduction}" />
					</h:selectOneListbox>
				</h:panelGroup>
				<rich:spacer />

				<h:panelGroup>
					<h:outputLabel value="#{msg.tag}: " />
				</h:panelGroup>
				<h:panelGroup>
					<h:inputText id="tagFilter" value="#{connector.tag}" size="40">
						<f:validateLength maximum="100" />
					</h:inputText>
				</h:panelGroup>

				<h:panelGroup>
					<h:commandButton action="submit()" value="Filtrar por tag"
						image="../img/find.png" title="Filtrar por tag">
					</h:commandButton>
				</h:panelGroup>
			</h:panelGrid>

			<div align="center">
				&#160;&#160;&#160;
				<h:commandButton action="#{connector.vaciarBean}"
					value="#{msg.newConnector}" />
				&#160;&#160;&#160;
			</div>

			<rich:dataTable id="conectoresTable" value="#{connector.connectors}"
				var="connect" rowClasses="even, odd" rows="8">
				<rich:column style="width:15%">
					<f:facet name="header">
						<h:outputText value="#{msg.name}" />
					</f:facet>
					<h:outputText value="#{connect.name}" />
				</rich:column>
				<rich:column style="width:10%">
					<f:facet name="header">
						<h:outputText value="#{msg.type}" />
					</f:facet>
					<h:outputText value="#{connect.typeLabel}"
						style="font-weight: bold;" />
				</rich:column>
				<rich:column style="width:25%">
					<f:facet name="header">
						<h:outputText value="#{msg.description}" />
					</f:facet>
					<h:outputText value="#{connect.shortDescription}" />
				</rich:column>
				<rich:column style="width:20%">
					<f:facet name="header">
						<h:outputText value="#{msg.path}" />
					</f:facet>
					<h:outputText value="#{connect.path}" />
				</rich:column>
				<rich:column styleClass="actionColumn">
					<f:facet name="header">
						<h:outputText value="#{msg.actions}" />
					</f:facet>
					<h:commandLink action="#{connector.view}">
						<img src="../img/find.png" alt="Ver conector" title="Ver Conector" />
						<f:setPropertyActionListener value="#{connect.id}"
							target="#{connector.connector.id}"></f:setPropertyActionListener>
					</h:commandLink>
		                &#160;&#160;
		                <h:commandLink action="#{connector.edit}">
						<img src="../img/edit.png" alt="Editar conector"
							title="Editar Conector" />
						<f:setPropertyActionListener value="#{connect.id}"
							target="#{connector.connector.id}"></f:setPropertyActionListener>
					</h:commandLink>
		                &#160;&#160;
		                <h:commandLink action="#{connector.delete}"
						onclick="if (!confirm('Est&#243; seguro que desea eliminar el Conector?')) return false;">
						<img src="../img/Pdelete.png" alt="Borrar conector"
							title="Borrar Conector" />
						<f:setPropertyActionListener value="#{connect.id}"
							target="#{connector.connector.id}"></f:setPropertyActionListener>
					</h:commandLink>
		                &#160;&#160;
		                <h:outputLink
						value="#{(connector.typeTesting eq connect.type) ? connector.serverTestingPath : connector.serverProductionPath}/#{connect.pathToWsdl}?wsdl"
						target="_blank">
						<h:outputLabel value="#{msg.wsdl}" />
					</h:outputLink>
		                &#160;&#160;
		                <h:outputLink
						value="#{facesContext.externalContext.requestContextPath}/export?id=#{connect.id}">
						<h:outputLabel value="#{msg.export}" />
					</h:outputLink>

				</rich:column>
			</rich:dataTable>

			<rich:datascroller id="sc2" for="conectoresTable" maxPages="3" page="#{connector.scrollerPage}" fastControls="hide" styleClass="paginado">
				<f:facet name="first">
					<img src="../img/first.png"/>
				</f:facet>
				<f:facet name="first_disabled">
					<img src="../img/first.png"/>
				</f:facet>
				<f:facet name="last">
					<img src="../img/last.png"/>
				</f:facet>
				<f:facet name="last_disabled">
					<img src="../img/last.png"/>
				</f:facet>
				<f:facet name="previous">
					<img src="../img/prev.png"/>
				</f:facet>
				<f:facet name="previous_disabled">
					<img src="../img/prev.png"/>
				</f:facet>
				<f:facet name="next">
					<img src="../img/next.png"/>
				</f:facet>
				<f:facet name="next_disabled">
					<img src="../img/next.png"/>
				</f:facet>
			</rich:datascroller>

		</h:form>

		<br />

	</ui:define>
</ui:composition>
